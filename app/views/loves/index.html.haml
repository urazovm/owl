= render partial: 'layouts/header'

- if defined? @users
  .row
    .col-sm-4
      - cache ['v1', @list, 'info'] do
        = render partial: 'lists/info', locals: { list: @list.decorate, user: @user.decorate }
    .col-sm-8
      - cache ['v1', @list, 'lovers'] do
        = render partial: 'loves/user_list', locals: { users: @users, list: @list.decorate }
  %script
    = "window.owl.env['loving'] = #{signed_in? && @list.user_id != current_user.id && current_user.loves?(@list)};"

- elsif defined? @lists
  - cache ['v1', @user, 'info'] do
    = render partial: 'users/info', locals: { user: @user.decorate }
  - cache ['v1', @user, 'lovings'] do
    = render partial: 'loves/list_list', locals: { user: @user.decorate, lists: @lists }
