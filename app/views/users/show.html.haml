= render partial: 'layouts/header'

- cache ['v1', @user, 'info'] do
  = render partial: 'users/info', locals: { user: @user.decorate }

- if defined?(@tmp_lists)
  - cache ['v1', tmp_list_cookie_updated_at] do
    = render partial: 'lists/tmp', locals: { lists: @tmp_lists.decorate }

- cache ['v1', @user, 'lists'] do
  = render partial: 'users/list_list', locals: { user: @user.decorate, lists: @lists }

%script
  = "window.owl.env['following'] = #{signed_in? && current_user.id != @user.id && current_user.following?(@user)};"
  = "window.owl.env['owner'] = #{signed_in? && current_user.id == @user.id};"
